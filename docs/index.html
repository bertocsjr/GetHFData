<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Download and Aggregate High Frequency Trading Data from Bovespa • GetHFData</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Download and Aggregate High Frequency Trading Data from Bovespa">
<meta property="og:description" content="Downloads and aggregates high frequency trading data for Brazilian instruments directly from Bovespa ftp site &lt;ftp://ftp.bmf.com.br/MarketData/&gt;.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">GetHFData</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ghfd-vignette-LOB.html">Recreating the LOB (limit order book)</a>
    </li>
    <li>
      <a href="articles/ghfd-vignette-Orders.html">Downloading and aggregating order data from Bovespa</a>
    </li>
    <li>
      <a href="articles/ghfd-vignette-Trades.html">Downloading and aggregating trade data from Bovespa</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/msperlin/GetHFData/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    
<div id="download-and-aggregate-high-frequency-trading-data-from-bovespa" class="section level2">
<h2 class="hasAnchor">
<a href="#download-and-aggregate-high-frequency-trading-data-from-bovespa" class="anchor"></a>Download and Aggregate High Frequency Trading Data from Bovespa</h2>
<p>Recently, Bovespa, the Brazilian financial exchange company, allowed external access to its <a href="ftp://ftp.bmf.com.br/">ftp site</a>. In this address one can find several information regarding the Brazilian financial system, including datasets with high frequency (tick by tick) trading data for three different markets: equity, options and BMF.</p>
<p>Downloading and processing these files, however, can be exausting. The dataset is composed of zip files with the whole trading data, separated by day and market. These files are huge in size and processing or aggregating them in a usefull manner requires specific knowledge for the structure of the dataset.</p>
<p>The package GetHFData make is easy to access this dataset directly by allowing the easy importation and aggregations of it. Based on this package the user can:</p>
<ul>
<li>Access the contents of the Bovespa ftp using function function <code>ghfd_get_ftp_contents</code>
</li>
<li>Get the list of available ticker in the trading data using <code>ghfd_get_available_tickers_from_ftp</code>
</li>
<li>Download individual files using <code>ghfd_download_file</code>
</li>
<li>Download and process a batch of dates and assets codes with <code>ghfd_get_HF_data</code>
</li>
</ul>
<p>In the next example we will only use a local file from the package. Given the size of the files in the ftp and the CHECK process of CRAN, it makes sense to keep this vignette compact and fast to run. More details about the usage of the package can be found in my <a href="http://bibliotecadigital.fgv.br/ojs/index.php/rbfin/article/view/64587/65702">RBFIN paper</a>.</p>
</div>
<div id="instalation" class="section level2">
<h2 class="hasAnchor">
<a href="#instalation" class="anchor"></a>Instalation</h2>
<p>You can install the development version from github:</p>
<pre><code><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports">devtools::install_github('msperlin/GetHFData')</a></code></pre>
<p>The stable version is availabe in CRAN:</p>
<pre><code>install.packages('GetHFData')</code></pre>
</div>
<div id="downloading-and-aggregating-trade-data" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-and-aggregating-trade-data" class="anchor"></a>Downloading and aggregating TRADE data</h2>
<p>Package GetHDData supports batch downloads and processing of several different tickers using start and end dates. In this vignette we are not running the code given the large size of the downloaded files. You should try the next example in your own computer (just copy, paste and run the code in R).</p>
<p>In this example we will download files from the ftp for all stocks related to Petrobras (PETR) and Vale do Rio Doce (VALE). The data will be processed, resulting in a dataframe with aggregated data.</p>
<pre><code>library(GetHFData)

first.time &lt;- '11:00:00'
last.time &lt;- '17:00:00'

first.date &lt;- '2015-11-01'
last.date &lt;- '2015-11-10'
type.output &lt;- 'agg'
type.data &lt;- 'trades'
agg.diff &lt;- '15 min'

# partial matching is available
my.assets &lt;- c('PETR','VALE')
type.matching &lt;- 'partial'
type.market  &lt;- 'equity'

df.out &lt;- ghfd_get_HF_data(my.assets =my.assets,
                           type.matching = type.matching,
                           type.market = type.market,
                           type.data = type.data,
                           first.date = first.date,
                           last.date = last.date,
                           first.time = first.time,
                           last.time = last.time,
                           type.output = type.output,
                           agg.diff = agg.diff)
</code></pre>
</div>
<div id="downloading-and-aggregating-order-data" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-and-aggregating-order-data" class="anchor"></a>Downloading and aggregating ORDER data</h2>
<p>Version 1.3 of <code>GetHFData</code> makes it possible to download and aggregate order data from Bovespa. The data comprises buy and sell orders sent by market operators. Tabular data includes type of orders (buy or sell, new/update/cancel/..), date/time of submission, priority time, prices, order quantity, among many other information.</p>
<p><strong>Be aware that these are very large files.</strong> One day of buy and sell orders in the equity market is around 100 MB zipped and close to 1 GB unzipped. If you computer is not suited to store this data in its memory, <strong>it will crash</strong>.</p>
<p>Here’s an example of usage that will download and aggregate order data for all option contracts related to Petrobras (PETR):</p>
<pre><code>library(GetHFData)

first.time &lt;- '10:00:00'
last.time &lt;- '17:00:00'

first.date &lt;- '2015-08-18' 
last.date &lt;- '2015-08-18'

type.output &lt;- 'agg' # aggregates data 
agg.diff &lt;- '5 min' # interval for aggregation

my.assets &lt;- 'PETR' # all options related to Petrobras (partial matching)
type.matching &lt;- 'partial' # finds tickers from my.assets using partial matching
type.market = 'options' # option market
type.data &lt;- 'orders' # order data

df.out &lt;- ghfd_get_HF_data(my.assets =my.assets, 
                           type.data= type.data,
                           type.matching = type.matching,
                           type.market = type.market,
                           first.date = first.date,
                           last.date = last.date,
                           first.time = first.time,
                           last.time = last.time,
                           type.output = type.output,
                           agg.diff = agg.diff)
</code></pre>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=GetHFData">https://​cloud.r-project.org/​package=GetHFData</a>
</li>
<li>Browse source code at <br><a href="https://github.com/msperlin/GetHFData/">https://​github.com/​msperlin/​GetHFData/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/msperlin/GetHFData/issues">https://​github.com/​msperlin/​GetHFData/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing GetHFData</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Marcelo Perlin <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Marcelo Perlin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
